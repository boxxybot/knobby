/*
long newpos[256] = {0,496,286,144,376,264,200,772,132,152,-4,0,172,80,512,0,1,192,0,508,123,60,0,0,4,112,0,12,340,742,184,96,
                    640,8,508,156,252,20,0,880,0,0,0,508,0,-5,-4,508,264,209,0,508,519,508,1532,0,224,1096,300,4,40,18,4,580,
                    104,39,79,764,508,352,192,0,0,0,0,508,304,376,296,280,76,224,68,348,280,436,48,4,252,160,0,0,88,76,60,508,
                    8,215,-36,4,20,261,0,0,44,276,52,1,1039,8,18,-1,76,51,296,508,64,27,416,508,40,103,0,1020,-32,52,4,1020,
                    20,-4,0,1020,24,144,152,0,24,16,164,0,56,0,84,0,46,48,48,0,0,0,0,0,0,0,0,0,24,0,0,0,
                    412,316,312,0,434,484,632,0,444,432,24,204,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,
                    12,8,0,28,8,4,-4,0,20,0,0,0,84,24,0,0,24,8,0,0,24,48,0,0,4,0,0,0,0,0,0,0,
                    68,60,80,96,104,100,84,153,76,76,76,76,84,60,92,96,52,64,44,0,56,56,72,52,128,144,128,144,132,144,128,128};

*/
long newpos[256] = {
0,108,510,124,164,247,84,690,136,152,0,0,344,300,257,256,256,356,256,1532,319,292,256,256,256,315,256,264,284,706,200,100,
832,260,1020,336,384,268,256,952,257,256,256,508,392,363,256,508,508,257,256,768,1183,632,1672,124,262,1280,256,376,258,258,256,1020,
256,258,259,768,256,257,256,256,256,256,256,768,304,376,296,280,76,224,68,348,280,436,224,4,252,160,172,0,88,76,60,508,
8,222,64,0,44,265,56,0,44,280,184,1,2579,1656,1630,-1,76,51,296,508,64,27,416,508,40,101,0,1016,-12,52,4,1016,
40,6,4,1020,28,144,152,0,24,16,160,0,64,0,86,0,58,72,88,0,4,292,56,0,20,339,60,0,48,300,56,0,
412,316,312,0,338,275,516,0,448,369,0,508,152,148,100,196,52,164,124,272,284,280,372,0,192,188,176,0,60,508,124,200,
12,8,0,28,8,4,-4,0,20,0,0,0,84,24,0,0,0,32,0,0,0,52,0,0,869,279,304,316,1020,84,384,344,
72,72,0,72,84,60,0,85,76,76,76,76,84,60,92,96,32,44,32,0,48,32,32,0,128,144,128,144,132,144,128,128};
 
int lastval[256] = {128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,
                    128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,
                    128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,
                    128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,
                    128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,
                    128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,
                    128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,
                    128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128};
                             
int midivals[256];

int midiquant[256] = {128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,
                      128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,
                      128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,
                      128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,
                      128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,
                      128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,
                      128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,
                      128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128};

int midiports[256] = {60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,
                      60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,
                      60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,
                      60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,
                      60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,
                      60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,
                      60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,
                      60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91};
              
int midichans[256] = {0xb1,0xb1,0xb1,0xb1,0xb1,0xb1,0xb1,0xb1,0xb1,0xb1,0xb1,0xb1,0xb1,0xb1,0xb1,0xb1,0xb1,0xb1,0xb1,0xb1,0xb1,0xb1,0xb1,0xb1,0xb1,0xb1,0xb1,0xb1,0xb1,0xb1,0xb1,0xb1,
                      0xb2,0xb2,0xb2,0xb2,0xb2,0xb2,0xb2,0xb2,0xb2,0xb2,0xb2,0xb2,0xb2,0xb2,0xb2,0xb2,0xb2,0xb2,0xb2,0xb2,0xb2,0xb2,0xb2,0xb2,0xb2,0xb2,0xb2,0xb2,0xb2,0xb2,0xb2,0xb2,
                      0xb3,0xb3,0xb3,0xb3,0xb3,0xb3,0xb3,0xb3,0xb3,0xb3,0xb3,0xb3,0xb3,0xb3,0xb3,0xb3,0xb3,0xb3,0xb3,0xb3,0xb3,0xb3,0xb3,0xb3,0xb3,0xb3,0xb3,0xb3,0xb3,0xb3,0xb3,0xb3,
                      0xb4,0xb4,0xb4,0xb4,0xb4,0xb4,0xb4,0xb4,0xb4,0xb4,0xb4,0xb4,0xb4,0xb4,0xb4,0xb4,0xb4,0xb4,0xb4,0xb4,0xb4,0xb4,0xb4,0xb4,0xb4,0xb4,0xb4,0xb4,0xb4,0xb4,0xb4,0xb4,
                      0xb5,0xb5,0xb5,0xb5,0xb5,0xb5,0xb5,0xb5,0xb5,0xb5,0xb5,0xb5,0xb5,0xb5,0xb5,0xb5,0xb5,0xb5,0xb5,0xb5,0xb5,0xb5,0xb5,0xb5,0xb5,0xb5,0xb5,0xb5,0xb5,0xb5,0xb5,0xb5,
                      0xb6,0xb6,0xb6,0xb6,0xb6,0xb6,0xb6,0xb6,0xb6,0xb6,0xb6,0xb6,0xb6,0xb6,0xb6,0xb6,0xb6,0xb6,0xb6,0xb6,0xb6,0xb6,0xb6,0xb6,0xb6,0xb6,0xb6,0xb6,0xb6,0xb6,0xb6,0xb6,
                      0xb7,0xb7,0xb7,0xb7,0xb7,0xb7,0xb7,0xb7,0xb7,0xb7,0xb7,0xb7,0xb7,0xb7,0xb7,0xb7,0xb7,0xb7,0xb7,0xb7,0xb7,0xb7,0xb7,0xb7,0xb7,0xb7,0xb7,0xb7,0xb7,0xb7,0xb7,0xb7,
                      0xb8,0xb8,0xb8,0xb8,0xb8,0xb8,0xb8,0xb8,0xb8,0xb8,0xb8,0xb8,0xb8,0xb8,0xb8,0xb8,0xb8,0xb8,0xb8,0xb8,0xb8,0xb8,0xb8,0xb8,0xb8,0xb8,0xb8,0xb8,0xb8,0xb8,0xb8,0xb8};


PROGMEM const float noteFreqs[128] = {8.176, 8.662, 9.177, 9.723, 10.301, 10.913, 11.562, 12.25, 12.978, 13.75, 14.568, 15.434, 16.352, 17.324, 18.354, 19.445, 20.602,
                              21.827, 23.125, 24.5, 25.957, 27.5, 29.135, 30.868, 32.703, 34.648, 36.708, 38.891, 41.203, 43.654, 46.249, 48.999, 51.913, 55, 58.27,
                              61.735, 65.406, 69.296, 73.416, 77.782, 82.407, 87.307, 92.499, 97.999, 103.826, 110, 116.541, 123.471, 130.813, 138.591, 146.832, 155.563,
                              164.814, 174.614, 184.997, 195.998, 207.652, 220, 233.082, 246.942, 261.626, 277.183, 293.665, 311.127, 329.628, 349.228, 369.994, 391.995,
                              415.305, 440, 466.164, 493.883, 523.251, 554.365, 587.33, 622.254, 659.255, 698.456, 739.989, 783.991, 830.609, 880, 932.328, 987.767,
                              1046.502, 1108.731, 1174.659, 1244.508, 1318.51, 1396.913, 1479.978, 1567.982, 1661.219, 1760, 1864.655, 1975.533, 2093.005, 2217.461,
                              2349.318, 2489.016, 2637.02, 2793.826, 2959.955, 3135.963, 3322.438, 3520, 3729.31, 3951.066, 4186.009, 4434.922, 4698.636, 4978.032,
                              5274.041, 5587.652, 5919.911, 6271.927, 6644.875, 7040, 7458.62, 7902.133, 8372.018, 8869.844, 9397.273, 9956.063, 10548.08, 11175.3, 11839.82, 12543.85};

PROGMEM const float bpm_scale[128] = {0.0625,0.125,0.1875,0.25,0.3125,0.375,0.4375,0.5,0.5625,0.625,0.6875,0.75,0.8125,0.875,0.9375,1.0,
                                      1.0625,1.125,1.1875,1.25,1.3125,1.375,1.4375,1.5,1.5625,1.625,1.6875,1.75,1.8125,1.875,1.9375,2.0,
                                      2.0625,2.125,2.1875,2.25,2.3125,2.375,2.4375,2.5,2.5625,2.625,2.6875,2.75,2.8125,2.875,2.9375,3.0,
                                      3.0625,3.125,3.1875,3.25,3.3125,3.375,3.4375,3.5,3.5625,3.625,3.6875,3.75,3.8125,3.875,3.9375,4.0,
                                      4.0625,4.125,4.1875,4.25,4.3125,4.375,4.4375,4.5,4.5625,4.625,4.6875,4.75,4.8125,4.875,4.9375,5.0,
                                      5.0625,5.125,5.1875,5.25,5.3125,5.375,5.4375,5.5,5.5625,5.625,5.6875,5.75,5.8125,5.875,5.9375,6.0,
                                      6.0625,6.125,6.1875,6.25,6.3125,6.375,6.4375,6.5,6.5625,6.625,6.6875,6.75,6.8125,6.875,6.9375,7.0,
                                      7.0625,7.125,7.1875,7.25,7.3125,7.375,7.4375,7.5,7.5625,7.625,7.6875,7.75,7.8125,7.875,7.9375,8.0};


const String midiprompts[64] = {"Main Mix A", 
                                "Main Mix B",        
                                "VCF1 Src Mixer",
                                "VCF1 Mod Mixer",
                                "VCA1 Mod Mixer",
                                "VCO1 Mod Mixer",
                                "VCO2 Mod Mixer",
                                "VCF2 Src Mixer",
                                "VCF2 Mod Mixer",
                                "VCA2 Mod Mixer",
                                "VCO3 Mod Mixer",
                                "VCO4 Mod Mixer",
                                "VCO5 Mod Mixer",
                                "VCF3 Src Mixer",
                                "VCF3 Mod Mixer",
                                "VCA3 Mod Mixer",
                                "VCO6 Mod Mixer",
                                "VCO7 Mod Mixer",
                                "VCO8 Mod Mixer",
                                "Mixer Placeholder 1",
                                "Mixer Placeholder 2",
                                "Mixer Placeholder 3",
                                "Mixer Placeholder 4",
                                "Mixer Placeholder 5",
                                "LFO 1",
                                "LFO 2",
                                "LFO 3",
                                "Sequencer BPM",
                                "VCO 1",
                                "VCO 2",
                                "VCO 3",
                                "VCO 4",
                                "VCO 5",
                                "VCO 6",
                                "VCO 7",
                                "VCO 8",
                                "LFO Phase",
                                "LFO 4",
                                "LFO 5",
                                "LFO 6",
                                "VCF 1",
                                "VCF 2",
                                "VCF 3",
                                "Delay Mix",
                                "Delay Time",
                                "Delay Send",
                                "Reverb Send",
                                "Effects Contour",
                                "Envelope 1", 
                                "Envelope 2", 
                                "Envelope 3", 
                                "Envelope 4", 
                                "Envelope 5", 
                                "Envelope 6", 
                                "Voice2 Inten Mod",
                                "Voice3 Inten Mod",
                                "Sequencer 1 A",
                                "Sequencer 1 B",
                                "Sequencer 2 A",
                                "Sequencer 2 B",
                                "Sequencer 3 A",
                                "Sequencer 3 B",
                                "Rhythm A",
                                "Rhythm B"};

const String mixmsgs[96] = {"Ext In:",
                            "Voice 1:",
                            "Mixer B:",
                            "Reverb:",
                            "Voice 2:",
                            "Strings:",
                            "mixmesg 6",
                            "Delay:",
                            "VCO 1:",
                            "VCO 2:",
                            "Pink:",
                            "Ext In:",
                            "LFO 1:",
                            "LFO 2:",
                            "Ext In:",
                            "Envelope 1:",
                            "LFO 1:",
                            "LFO 2:",
                            "Ext In:",
                            "Envelope 2:",
                            "LFO 1:",
                            "LFO 2:",
                            "Ext In:",
                            "Envelope 1:",
                            "LFO 1:",
                            "LFO 2:",
                            "Ext In:",
                            "Envelope 1:",
                            "VCO 3:",
                            "VCO 4:",
                            "VCO 5:",
                            "Noise:",
                            "LFO 2:",
                            "LFO 3:",
                            "CV 2:",
                            "Envelope 3:",
                            "LFO 2:",
                            "LFO 3:",
                            "Ext In:",
                            "Envelope 4:",
                            "LFO 3:",
                            "LFO 2:",
                            "Ext In:",
                            "CV 2:",
                            "LFO 3:",
                            "LFO 2:",
                            "Ext In:",
                            "CV 2:",
                            "LFO 3:",
                            "LFO 2:",
                            "Ext In:",
                            "CV 2:",
                            "VCO 6:",
                            "VCO 7:",
                            "VCO 8:",
                            "Noise:",
                            "LFO4:",
                            "LFO5:",
                            "LFO6:",
                            "Envelope 5:",
                            "LFO4:",
                            "LFO5:",
                            "LFO6:",
                            "Envelope 6:",
                            "LFO4:",
                            "LFO5:",
                            "LFO6:",
                            "Fine:",
                            "LFO4:",
                            "LFO5:",
                            "LFO6:",
                            "Fine:",
                            "LFO4:",
                            "LFO5:",
                            "LFO6:",
                            "Fine:",
                            "Delay 1L",
                            "Delay 2L",
                            "Delay 1R",
                            "Delay 2R",
                            "mixmesg 80",
                            "mixmesg 81",
                            "mixmesg 82",
                            "mixmesg 83",
                            "Voice 1:",
                            "Voice 2:",
                            "Strings:",
                            "Unassigned 87",
                            "Voice 1:",
                            "Voice 2:",
                            "Strings:",
                            "Unassigned 91",
                            "mixmesg 92",
                            "mixmesg 93",
                            "mixmesg 94",
                            "mixmesg 95"};

const String fxmsgs[8] = {"Voice1",
                          "Voice2",                            
                          "Voice3",                            
                          "Ext In",                            
                          "Voice1",                            
                          "Voice2",                            
                          "Voice3",                            
                          "Ext In"};                            

const String euclid[128] = {"100",
                            "1000",
                            "10000",
                            "10100",
                            "10101",
                            "11110",
                            "11111",
                            "100000",
                            "100100",
                            "101010",
                            "110110",
                            "111110",
                            "111111",
                            "1000000",
                            "1001000",
                            "1010100",
                            "1010101",
                            "1101101",
                            "1111110",
                            "1111111",
                            "10000000",
                            "10001000",
                            "10010010",
                            "10101010",
                            "10110110",
                            "11101110",
                            "11111110",
                            "11111111",
                            "100000000",
                            "100010000",
                            "100100100",
                            "101010100",
                            "101010101",
                            "110110110",
                            "111011101",
                            "111111110",
                            "111111111",
                            "1000000000",
                            "1000010000",
                            "1001001000",
                            "1010010100",
                            "1010101010",
                            "1010110101",
                            "1101101101",
                            "1111011110",
                            "1111111110",
                            "1111111111",
                            "10000000000",
                            "10000100000",
                            "10001000100",
                            "10010010010",
                            "10101010100",
                            "10101010101",
                            "10110110110",
                            "11011101110",
                            "11110111101",
                            "11111111110",
                            "11111111111",
                            "100000000000",
                            "100000100000",
                            "100010001000",
                            "100100100100",
                            "101001010010",
                            "101010101010",
                            "101011010110",
                            "110110110110",
                            "111011101110",
                            "111110111110",
                            "111111111110",
                            "111111111111",
                            "1000000000000",
                            "1000001000000",
                            "1000100010000",
                            "1001001001000",
                            "1001010010100",
                            "1010101010100",
                            "1010101010101",
                            "1011010110101",
                            "1101101101101",
                            "1110111011101",
                            "1111101111101",
                            "1111111111110",
                            "1111111111111",
                            "10000000000000",
                            "10000001000000",
                            "10000100001000",
                            "10010001001000",
                            "10010010010010",
                            "10101001010100",
                            "10101010101010",
                            "10101011010101",
                            "10110110110110",
                            "11011011101101",
                            "11101111011110",
                            "11111101111110",
                            "11111111111110",
                            "11111111111111",
                            "100000000000000",
                            "100000010000000",
                            "100001000010000",
                            "100010001000100",
                            "100100100100100",
                            "101001010010100",
                            "101010101010100",
                            "101010101010101",
                            "101011010110101",
                            "110110110110110",
                            "110111011101110",
                            "111101111011110",
                            "111111011111101",
                            "111111111111110",
                            "111111111111111",
                            "1000000000000000",
                            "1000000010000000",
                            "1000010000100000",
                            "1000100010001000",
                            "1001001001001000",
                            "1001001010010010",
                            "1010100101010010",
                            "1010101010101010",
                            "1010101101010110",
                            "1011011010110110",
                            "1101101101101101",
                            "1110111011101110",
                            "1111011110111101",
                            "1111111011111110",
                            "1111111111111110",
                            "1111111111111111"};

                             
